parameters:
  - name: version
    type: string
  - name: appName
    type: string
  - name: artifactName
    type: string
    default: 'functionapp'

steps:

- download: pipeline
  artifact: ${{ parameters.artifactName }}
  patterns: '**/${{ parameters.artifactName }}-${{ parameters.version }}.zip'

- task: AzureFunctionApp@1
  displayName: 'Deploy Selected Version to Test'
  inputs:
    azureSubscription: 'HolyCheese-ServiceConnection'
    appType: 'functionApp'
    appName: ${{ parameters.appName }}
    package: '$(Pipeline.Workspace)/${{ parameters.artifactName }}-${{ parameters.version }}.zip'
